# Example: How to use the security scanner from a consumer repository

name: 'Example Consumer Usage'

on:
  push:
    branches: [main]
  pull_request:
  workflow_dispatch:
    inputs:
      target_repo:
        description: 'Repository to scan'
        required: false
        type: string
        default: 'Consensys/linea-monorepo'

jobs:
  security-scan:
    uses: ./.github/workflows/security-scan.yml
    with:
      repo: ${{ inputs.target_repo || github.repository }}
      # languages_config: '' # Leave empty to use built in language detection and config
      paths_ignored: |
        .storybook/
        **/__snapshots__/
        **/*.snap
        **/*.stories.js
        **/*.test.js*
        **/*.test.ts*
        **/fixtures/
        **/mocks/
        **/test*/
        docs/
        node_modules
        dist
        build
      rules_excluded: |
        rule1
        rule2
      # project_metrics_token: ${{ secrets.SECURITY_SCAN_METRICS_TOKEN }}
      # slack_webhook: ${{ secrets.APPSEC_BOT_SLACK_WEBHOOK }}
    permissions:
      actions: read
      contents: read
      security-events: write